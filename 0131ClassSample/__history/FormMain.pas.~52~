unit FormMain;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls;

type
  TCustomDraw = class
  private
    fCanvas : TCanvas;
    fX : Integer;
    fY : Integer;
    fSize : Integer;
    fTimer : TTimer;

    procedure DrawTimer(Sender : TObject);
  protected
    procedure Draw; virtual;
  public
    constructor Create(aCanvas : TCanvas; aX, aY, aSize : Integer); virtual;
    destructor Destroy; override;
  end;

  TCircle = class(TCustomDraw)
  protected
    procedure Draw; override;
  end;

  TRactangle = class(TCircle)
  protected
    procedure Draw; override;
  end;

  TTriangle = class(TCustomDraw)
  protected
    procedure Draw; override;
  end;

  TForm1 = class(TForm)
    procedure FormMouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TCustomDraw }
constructor TCustomDraw.Create(aCanvas : TCanvas; aX, aY, aSize : Integer);
begin
  inherited Create;

  fCanvas := aCanvas;
  fX := aX;
  fY := aY;
  fSize := aSize;
  fTimer := TTimer.Create(nil);
  with fTimer do begin
    Interval := 500;
    OnTimer := DrawTimer;
  end;

  if fCanvas <> nil then begin
    fCanvas.Pen.Mode := pmNotXor;
    fCanvas.Brush.Style := bsClear;
  end;

  Draw;
end;

destructor TCustomDraw.DesTroy;
begin
  Draw;
  if fTimer <> nil then begin
    fTimer.Free;
    fTimer := nil;
  end;

  inherited;
end;

procedure TCustomDraw.DrawTimer(Sender : Tobject);
begin
  Free;
end;


procedure TCircle.Draw; //부모클래스의Draw
begin

end;

{ Tcircle }

procedure TCircle.Draw;
begin
  if fCanvas <> nil then
    fCanvas.Ellipse(fX - fSize, fY - fSize, fX + fSize, fY + fSize);

  inherited;
end;

{ TRactangle }

procedure TRactangle.Draw;
begin
  if fCanvas <> nil then
    fCanvas.Rectangle(fX - fSize, fY - fSize, fX + fSize, fY + fSize);

    inherited;
end;

{ TTriangle }

procedure TTriangle.Draw;
begin
  if fCanvas <> nil then begin
    fCanvas.MoveTo(fX, fY - fSize);
    fCanvas.MoveTo(fX - fSize, fY + fSize);
    fCanvas.MoveTo(fX + fSize, fY + fSize);
  end;
end;

end.
